<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
          <div class="navbar-header">
            <button
              type="button"
              class="navbar-toggle"
              data-toggle="collapse"
              data-target="#myNav"
            >
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a href="/" class="navbar-brand">AuthSite</a>
          </div>
          <div class="collapse navbar-collapse" id="myNav">
            <ul class="nav navbar-nav navbar-right">
              <li>
                <a href="/logout">Logout <i class="glyphicon glyphicon-log-out"></i></a>
              </li>

            </ul>
          </div>
        </div>
    </nav>

    <div class="container">
        <div class="d-flex justify-content-center">
                <div style="width: 50%; margin: auto;">
                    <code class="text-center text-muted"><h3>Profile</h3></code>
                    <div class="card w-75" id="profile">
                        <div class = "container-fluid">
                            <div class = "row" style="border: 1px dashed gray;">
                                <div class= "col-md-4">
                                    <img src="<%=user.profilePhoto%>" style="width: 100%;" alt="...">
                                </div>
                                <div class = "col-md-8">
                                    <div class="card-body">
                                        <div class="text-right">
                                            <a 
                                                id="edit-btn"
                                                href="#edit-profile-div"
                                                class="btn btn-info">
                                                Edit Profile
                                            </a>
                                        </div>
                                    <h3 class="card-title"><code><%= user.name %></code></h3>
                                    <ul class = "list-group">
                                        <li class = "list-group-item"><strong>Username: </strong> <%= user.username %> </li>
                                        <li class = "list-group-item"><strong>Email: </strong> <%= user.email %> </li>
                                        <li class = "list-group-item"><strong>Bio: </strong> <%= user.bio %> </li>
                                        <li class = "list-group-item"><strong>Gender: </strong> <%= user.gender %> </li>
                                        <li class = "list-group-item"><strong>Date of Birth: </strong> <%= user.dob.toLocaleDateString() %> </li>
                                        <li class = "list-group-item"><strong>Phone: </strong> <%= user.phone %> </li>
                                        <li class = "list-group-item"><strong>Address: </strong> <%= user.address %> </li>
                                        <li class = "list-group-item"><strong>Last Login: </strong> <%= user.lastLogin.toLocaleDateString() %> <%=  user.lastLogin.toLocaleTimeString() %> </li>
                                    </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="edit-profile-div">
      <div class="container">
        <div class="row mt-1">
            <h3 class="text-muted text-center mb-3">Edit Profile</h3>
            <br>
            <div class="col-lg-12 mt-5 mt-lg-0">
              <form
                action="/edit-profile"
                enctype="multipart/form-data"
                id = 'edit-form'
                method="POST"
              >
                <div class="row">
                  <div class="col-md-6 form-group">
                      <label for="name" class="text-muted">Name</label>
                    <input
                      value="<%= user.name %>"
                      type="text"
                      name="name"
                      class="form-control"
                      id="name"
                      placeholder="Full name"
                      required
                    />
                    <span class="name-err"></span>
                  </div>
                  <div class="col-md-6 form-group mt-3 mt-md-0">
                    <label for="username" class="text-muted">Username</label>
                    <input
                      value="<%= user.username %>"
                      type="text"
                      class="form-control"
                      name="username"
                      id="username"
                      placeholder="Choose a unique username...at least five chracters long"
                      required
                    />
                    <span id="username-err" class="text-danger"></span>
                  </div>
                </div>
                <div class="row">
                    <div class="col-md-6 form-group">
                    <label for="address" class="text-muted">Email</label>
                      <input
                        value="<%= user.email %>"
                        type="email"
                        name="email"
                        class="form-control"
                        id="email"
                        placeholder="Email"
                        required
                      />
                      <span id="email-err" class="text-danger"></span>
                    </div>
                    <div class="col-md-6 form-group mt-3 mt-md-0">
                        <label for="phone" class="text-muted">Phone</label>
                        <input
                        value = "<%= user.phone %>"
                        type="number"
                        class="form-control"
                        name="phone"
                        id="phone"
                        placeholder="Your phone number"
                        required
                      />
                      <span id="phone-err" class="text-danger"></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 form-group">
                    <label for="address" class="text-muted">Address</label>
                      <input
                        value="<%= user.address %>"
                        type="text"
                        name="address"
                        class="form-control"
                        id="address"
                        placeholder="Your address"
                        required
                      />
                    </div>
                    <div class="col-md-6 form-group mt-3 mt-md-0">
                        <label for="gender" class="text-muted">Gender</label>
                        <select name="gender" id="gender" class="form-control">
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="nonbinary">Non Binary</option>
                            <option value="none">Prefer Not to Say</option>
                        </select>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 form-group">
                    <label for="password" class="text-muted">Password</label>
                      <input
                        type="password"
                        name="password"
                        class="form-control"
                        id="password"
                        placeholder="No less than six characters"
                        required
                      />
                      <span id="password-err" class="text-danger"></span>
                    </div>
                    <div class="col-md-6 form-group mt-3 mt-md-0">
                    <label for="password2" class="text-muted">Password</label>
                      <input
                        type="password"
                        name="password2"
                        class="form-control"
                        id="password2"
                        placeholder="Enter same password again..."
                        required
                      />
                      <span id="password2-err" class="text-danger"></span>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-md-6 form-group">
                    <label for="dob" class="text-muted">Date of Birth</label>
                      <input
                        type="date"
                        name="dob"
                        class="form-control"
                        id="dob"
                        required
                      />
                      <span id="dob-err" class="text-danger"></span>
                    </div>
                    <div class="col-md-6 form-group mt-3 mt-md-0">
                    <label for="photo" class="text-muted">Profile Photo</label>
                      <input
                        type="file"
                        name="profilePhoto"
                        class="form-control"
                        id="profilePhoto"
                        required
                      />
                      <span id="photo-err" class="text-danger"></span>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-md-12 form-group">
                      <label for="bio text-muted">Bio</label>
                      <textarea name="bio" id="bio" rows="4" class="form-control" required>
                        <%= user.bio %>
                      </textarea>
                      <br>
                    </div>
                  </div>

                <div class="text-center mt-2">
                  <button type="submit" class="btn btn-primary">Submit</button>
                </div>
              </form>
            
        <br>
        <br>
              <p class="text-center mt-5">Already have an account? <a href="/login">Login</a></p>
            </div>
          </div>
    </div>
    </div>
    <script src="./bootstrap/js/jQuery-2.1.3.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="./myscripts.js"></script>
</body>
</html>